{"schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/keyboardkit\/understanding-navigation"]}],"kind":"article","metadata":{"role":"article","roleHeading":"Article","title":"Understanding Navigation","modules":[{"name":"KeyboardKit"}]},"sections":[],"seeAlsoSections":[{"title":"Articles","identifiers":["doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Actions","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-AI-Support","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Autocomplete","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Buttons","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Callouts","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Colors","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Device-Utilities","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Dictation","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Emojis","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Extensions","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-External-Keyboards","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Feedback","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Gestures","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Images","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Layout","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Localization","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Previews","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Proxy-Utilities","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Settings","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-State","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Styling","doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Text-Routing"],"generated":true}],"identifier":{"url":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Navigation","interfaceLanguage":"swift"},"abstract":[{"text":"This article describes the KeyboardKit navigation engine.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/KeyboardKit\/documentation\/KeyboardKit"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","level":2,"anchor":"overview"},{"inlineContent":[{"type":"text","text":"Keyboards sometimes have to open urls, trigger deeplinks or navigate from the keyboard to the main app. This is however hard, since keyboard extensions canâ€™t use "},{"inlineContent":[{"text":"UIApplication.main","type":"text"}],"type":"strong"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"KeyboardKit therefore provides ways to open any URLs from a keyboard extension, without using "},{"inlineContent":[{"text":"UIApplication","type":"text"}],"type":"strong"},{"text":".","type":"text"}]},{"level":2,"anchor":"How-to-open-URLs-from-a-keyboard-extension","text":"How to open URLs from a keyboard extension","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Since keyboard extensions mustnâ€™t refer to ","type":"text"},{"type":"codeVoice","code":"UIApplication.main"},{"type":"text","text":", KeyboardKit has alternate ways to open a URL from a keyboard."}]},{"inlineContent":[{"type":"text","text":"One way is to use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController"},{"type":"text","text":"."},{"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController\/openUrl(_:)","isActive":true,"type":"reference"},{"type":"text","text":", which opens URLs without using the application. However, this requires you to refer to the controller, which involves a big risk of introducing memory leaks."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"A better way is to just trigger a "},{"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardAction\/url(_:id:)","type":"reference","isActive":true},{"text":", and let the ","type":"text"},{"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController\/services","isActive":true,"type":"reference"},{"text":" action handler handle the operation. This removes any need to refer to the controller, and also lets you customize the URL handling with a custom action handler if needed.","type":"text"}],"type":"paragraph"},{"anchor":"ðŸ‘‘-Pro-features","type":"heading","level":2,"text":"ðŸ‘‘ Pro features"},{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro","isActive":true,"type":"reference"},{"type":"text","text":" used to have a "},{"type":"strong","inlineContent":[{"text":"PreviousAppNavigator","type":"text"}]},{"type":"text","text":" that could navigate back to the previous app. However, the implementation in KeyboardKit 7 stopped working in iOS 17, and the new implementation in KeyboardKit 8 was rejected by Apple."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"At the time of writing, there is no way to navigate back to the keyboard from the main application. If you want to take a risk at adding the rejected code, here are two implementations that you can add "},{"type":"strong","inlineContent":[{"type":"text","text":"at your own risk"}]},{"text":":","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This code works in iOS 17, but will most probably be rejected:"}]},{"code":["func openPreviousApplication() {","    guard let obj = objc_getClass(\"LSApplicationWorkspace\") as? NSObject else { return false }","    let workspace = obj.perform(Selector((\"defaultWorkspace\")))?.takeUnretainedValue() as? NSObject","    guard let workspace else { return }","    let selector = Selector((\"openApplicationWithBundleID:\"))","    let bundleId = previousApplicationBundleId","    _ = workspace.perform(selector, with: bundleId)","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"This code works in iOS 16, but will also most probably be rejected:"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["func openPreviousApplication() {","    let sysNavIvar = class_getInstanceVariable(UIApplication.self, variableId),","    let action = object_getIvar(UIApplication.shared, sysNavIvar) as? NSObject,","    _ = action.perform(#selector(getter: PrivateSelectors.destinations)).takeUnretainedValue() as? [NSNumber],","}"]},{"inlineContent":[{"text":"Since the lack of back navigation makes for a bad user experience, please use the Apple Feedback Assistant to request a native way to achieve this navigation.","type":"text"}],"type":"paragraph"}]}],"references":{"doc://KeyboardKit/documentation/KeyboardKit/Understanding-AI-Support":{"url":"\/documentation\/keyboardkit\/understanding-ai-support","title":"Understanding AI Support","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit AI support.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-AI-Support"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Extensions":{"url":"\/documentation\/keyboardkit\/understanding-extensions","title":"Understanding Extensions","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes KeyboardKit native type extensions.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Extensions"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Dictation":{"url":"\/documentation\/keyboardkit\/understanding-dictation","title":"Understanding Dictation [BETA]","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit dictation engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Dictation"},"doc://KeyboardKit/documentation/KeyboardKit":{"url":"\/documentation\/keyboardkit","abstract":[{"type":"text","text":"KeyboardKit helps you create custom keyboards for iOS and iPadOS, using Swift and SwiftUI."}],"type":"topic","kind":"symbol","identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit","title":"KeyboardKit","role":"collection"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Text-Routing":{"url":"\/documentation\/keyboardkit\/understanding-text-routing","title":"Understanding Text Routing","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit text routing engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Text-Routing"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Localization":{"url":"\/documentation\/keyboardkit\/understanding-localization","title":"Understanding Localization","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit localization engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Localization"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Proxy-Utilities":{"url":"\/documentation\/keyboardkit\/understanding-proxy-utilities","title":"Understanding Proxy Utilities","role":"article","kind":"article","type":"topic","abstract":[{"type":"text","text":"This article describes the KeyboardKit proxy engine."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Proxy-Utilities"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Emojis":{"url":"\/documentation\/keyboardkit\/understanding-emojis","title":"Understanding Emojis","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit emoji engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Emojis"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Settings":{"url":"\/documentation\/keyboardkit\/understanding-settings","title":"Understanding Settings","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit settings engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Settings"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardAction/url(_:id:)":{"url":"\/documentation\/keyboardkit\/keyboardaction\/url(_:id:)","identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardAction\/url(_:id:)","type":"topic","fragments":[{"text":"case","kind":"keyword"},{"kind":"text","text":" "},{"text":"url","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:10Foundation3URLV","text":"URL","kind":"typeIdentifier"},{"text":"?, ","kind":"text"},{"kind":"externalParam","text":"id"},{"kind":"text","text":": "},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"Open an url when released, using a custom id for identification."}],"title":"KeyboardAction.url(_:id:)","kind":"symbol","role":"symbol"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Gestures":{"url":"\/documentation\/keyboardkit\/understanding-gestures","title":"Understanding Gestures","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit gesture engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Gestures"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Device-Utilities":{"url":"\/documentation\/keyboardkit\/understanding-device-utilities","title":"Understanding Device Utilities","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit device utilities.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Device-Utilities"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Previews":{"url":"\/documentation\/keyboardkit\/understanding-previews","title":"Understanding Previews","role":"article","kind":"article","type":"topic","abstract":[{"type":"text","text":"This article describes the KeyboardKit preview engine."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Previews"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardInputViewController/openUrl(_:)":{"fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"openUrl","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:10Foundation3URLV","text":"URL","kind":"typeIdentifier"},{"text":"?)","kind":"text"}],"role":"symbol","title":"openUrl(_:)","abstract":[{"text":"Open a certain URL","type":"text"}],"type":"topic","url":"\/documentation\/keyboardkit\/keyboardinputviewcontroller\/openurl(_:)","identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController\/openUrl(_:)","kind":"symbol"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-State":{"url":"\/documentation\/keyboardkit\/understanding-state","title":"Understanding State","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit state engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-State"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Buttons":{"url":"\/documentation\/keyboardkit\/understanding-buttons","title":"Understanding Buttons","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes some general KeyboardKit buttons.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Buttons"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardInputViewController":{"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"KeyboardInputViewController"}],"navigatorTitle":[{"text":"KeyboardInputViewController","kind":"identifier"}],"kind":"symbol","type":"topic","url":"\/documentation\/keyboardkit\/keyboardinputviewcontroller","title":"KeyboardInputViewController","abstract":[{"type":"text","text":"This class extends "},{"type":"codeVoice","code":"UIInputViewController"},{"type":"text","text":" with KeyboardKit"},{"type":"text","text":" "},{"text":"specific functionality.","type":"text"}]},"https://github.com/KeyboardKit/KeyboardKitPro":{"type":"link","identifier":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro","titleInlineContent":[{"type":"text","text":"KeyboardKit Pro"}],"title":"KeyboardKit Pro","url":"https:\/\/github.com\/KeyboardKit\/KeyboardKitPro"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Colors":{"url":"\/documentation\/keyboardkit\/understanding-colors","title":"Understanding Colors","role":"article","kind":"article","type":"topic","abstract":[{"type":"text","text":"This article describes the KeyboardKit color engine."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Colors"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Styling":{"url":"\/documentation\/keyboardkit\/understanding-styling","title":"Understanding Styling","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit styling engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Styling"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Images":{"url":"\/documentation\/keyboardkit\/understanding-images","title":"Understanding Images","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit keyboard image engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Images"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Layout":{"url":"\/documentation\/keyboardkit\/understanding-layout","title":"Understanding Layout","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit layout engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Layout"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Feedback":{"url":"\/documentation\/keyboardkit\/understanding-feedback","title":"Understanding Feedback","role":"article","kind":"article","type":"topic","abstract":[{"type":"text","text":"This article describes the KeyboardKit feedback engine."}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Feedback"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-External-Keyboards":{"url":"\/documentation\/keyboardkit\/understanding-external-keyboards","title":"Understanding External Keyboards","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit external keyboard engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-External-Keyboards"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Autocomplete":{"url":"\/documentation\/keyboardkit\/understanding-autocomplete","title":"Understanding Autocomplete","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit autocomplete engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Autocomplete"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Callouts":{"url":"\/documentation\/keyboardkit\/understanding-callouts","title":"Understanding Callouts","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit callout engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Callouts"},"doc://KeyboardKit/documentation/KeyboardKit/KeyboardInputViewController/services":{"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/KeyboardInputViewController\/services","title":"services","kind":"symbol","url":"\/documentation\/keyboardkit\/keyboardinputviewcontroller\/services","role":"symbol","abstract":[{"type":"text","text":"The default set of keyboard-specific services."}],"fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"services","kind":"identifier"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:11KeyboardKit0A0V","text":"Keyboard"},{"text":".","kind":"text"},{"text":"KeyboardServices","preciseIdentifier":"s:11KeyboardKit0A0V0A8ServicesC","kind":"typeIdentifier"}],"type":"topic"},"doc://KeyboardKit/documentation/KeyboardKit/Understanding-Actions":{"url":"\/documentation\/keyboardkit\/understanding-actions","title":"Understanding Actions","role":"article","kind":"article","type":"topic","abstract":[{"text":"This article describes the KeyboardKit action engine.","type":"text"}],"identifier":"doc:\/\/KeyboardKit\/documentation\/KeyboardKit\/Understanding-Actions"}}}